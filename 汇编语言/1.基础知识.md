# 汇编语言

## 基础知识

汇编语言是建立在硬件之上工作的编程语言，首先要了解硬件体系的结构，才能有效的应用汇编语言对其编程。

### 1.1机器语言

- 机器语言是机器指令的集合
- 机器指令展开来讲就是一台机器可以正确执行的命令
- 每一种微处理器，由于硬件设计和结构不同，需要用不同的点评脉冲来控制，使他工作。所以没种微处理器都有自己的机器指令集，也就是机器语言。

例如：

    push ax
    01010000

### 1.2汇编语言的产生

- 机器指令  1000100111011000
- 操作 寄存器BX的内容发送到AX中
- 汇编指令 MOV AX, BX

寄存器：CPU中存储数据的期间，一个CPU中有多个寄存器(AX,BX等),比缓存更接近CPU

### 1.3 汇编语言的组成

1. 汇编指令(机器码的助记符，如mov)
2. 伪指令 (由编译器执行,segment)
3. 其他符号 (由编译器识别，如+ 1,逻辑运算符)

汇编语言的核心是汇编指令，他决定了汇编语言的特性

### 1.4存储器

CPU控制整个计算机的运作并运算，要想让CPU工作，就必须向CPU提供指令和数据

指令和数据在存储器中存放，也就是平常说的内存，内存的作用仅次于CPU，磁盘不同于内存，磁盘上的数据或程序如果不读到内存，就无法被CPU使用(显存等也是存储器)

### 1.5指令和数据

1000100111011000   -> 89DBH(数据)
1000100111011000   -> MOV AX, BX(指令)

同样的机器码如何区分数据和指令呢(可通过1.7思考，具体方式后面会有详细介绍)

说明H是16进制立即数缩写(HEX),B是二进制(binary)，10进制无需标注

### 1.6存储单元

存储器被划分为若干个存储单元，从0开始编号，128个存储单元的存储器，编号从0~127，一个存储单元可以存储一个字节(1Byte=8bit)

### 1.7CPU对存储器的读写

CPU想要进行数据的读写，必须和外部期间(标准的说法是芯片)进行下面3类信息的交互

- 存储单元的地址(地址信息)
- 期间的选择，读或写的命令(控制信息)
- 读或写的数据(数据信息)

CPU和其他线片的导线，通常称为总线。从物理上讲，就是一根根导线的集合。根据传送信息()电信号的不同，总线从逻辑上分为三类， 地址总线、控制总线和数据总线

机器码: 10100001 00000011 00000000
汇编指令: MOV AX,[3]
含义：传送3好单元的内容进AX

### 1.8地址总线

- CPU通过地址总线来指定存储单元
- 一个CPU又N个地址线，则可以说这个CPU地址总线宽度为N，最多可以寻找2<sup>N</sup>个内存单元

|CPU|寻址11(顶部为低地址)|内存|
|--|:--:|--|
||1||
||1||
||0||
||1||
||0||
||0||
||0||
||0||


注意：64位系统是不是速度就是64位呢，答案是不一定的，一定要满足64位CPU+64位的操作系统+64位的软件

### 1.9数据总线

数据总线宽度决定了CPU和外界的数据传送速度，8跟数据总监一次课传送一个8位二进制数据(一个字节)，16跟数据总线一次传2个字节。对于同样的数据89D8h,8088cpu(8位)和8086cpu传送如下

|CPU|8088第二次|8088第一次|内存|
|--|:--:|:--:|--|
||1|0|
||0|0||
||0|0||
||1|1||
||0|1||
||0|0||
||0|1||
||1|1||
||89|D8||

|CPU|8086|内存|
|--|:--:|--|
||0|
||0||
||0||
||1||
||1||
||0||
||1||
||1||
||1|
||0||
||0||
||1||
||0||
||0||
||0||
||1||

注意：转换过程为4个二进制数结果为1个16进制数

### 1.10 控制总线

CPU对外部期间的控制是通过控制总线来进行的，在这里控制总线是个总成。控制总线是一些不同控制线的集合。有多少根控制总线，就意味着CPU对外部器件的多少种控制，所以控制总线的宽度决定了CPU对外部器件的控制能力。

有一根称为""读信号输出的控制总线负责由CPU向外传送读信号，CPU向该控制线上输出低电平表示要读取


监测点1.1
1. 1个CPU的寻址能力是8KB，那么他的宽度是13
2. 1KB的存储器有1024个存储单元，存储单元从0~1023
3. 1KB的存储器可以存储1024*8个bit，1024个Byte
4. 1GB、1MB、1KB分别是2<sup>30</sup>、2<sup>20</sup>、2<sup>10</sup>
5. 8080、8088、80286、80386的地址总线宽度为16根，20根，24根，32根，则他们的寻址能力分别问64KB,1MB,16MB,4GB
6. 8080、8088、8086、0286、80386数据总线宽度为，8根，8根，16根，16根，32根，则他们一次可以传送数据为1B,1B,2B,2B,4B
7. 从内存中读取1024字节的数据，8086至少要读512次，80386至少要读256次
8. 存储器中数据和程序以二进制形式存放

注意:7小题中'至少'两字，8086一次课传输数据位2B，此处却不是固定的512次，说明传送数据的方式有不同形式，后面会介绍到

### 1.11内存地址空间(概述)

一个CPU地址总线宽度为10，那他可以寻址1024个内存单元，这1024个可寻到的内存单元构成了这个CPU的内存地址空间。

### 1.12主板

- 每一台PC机中，有一个主板，主板尚有一些核心器件和主要器件。
- 这些器件通过总线项链

### 1.13接口卡

- 计算机系统中，所有可用程序控制工作的设备，不许收到CPU的控制
- CPU对外部设备不能直接控制，如显示器、音响、打印机。这届控制这些设备进行工作的是插在拓展槽上的接口卡

### 1.14各类存储区的芯片

从读写属性分类

1. 随机存储器(RAM),如内存，必须带点存储

2. 只读存储器(ROM)，数据关机不丢失

BIOS: Basic Input/Output System,基本输入输出系统。由主板和各类接口卡(如显卡、网卡等)厂商提供的软件系统

从功能和连接上分类

1. 随机存储器的RAM
2. 装有BIOS的ROM
3. 接口卡上的RAM

主板上CPU通过总线连接RAM(主存储器)，ROM(装有系统的BIOS)，RAM(主存储器内存条-拓展插槽)，显卡(RAM显存+ROM显卡BIOS-扩展插槽)连接显示器，ROM(装有网卡BIOS-扩展插槽)，其它

### 1.15内存地址空间

上述的存储器从物理上是独立的，但是他们有以下两点相同

1. 都和CPU相连
2. cpu对他们进行读或写的时候都通过控制线发出内存读写命令

所有的物理存储器被看作一个由若干存储单元组成组成的逻辑存储器，这个逻辑存储器就是内存地址空间


8086PC机内存地址空间分配的基本情况
- 00000-9FFFF 主存储器地址空间
- A0000-BFFFF 显存地址空间
- C0000-FFFFF 各类ROM地址空间