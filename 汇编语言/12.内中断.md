## 内中断

任何一种CPU，都具备一种能力，可以在执行完当前正在执行的指令之后，检测到从CPU外部或内部产生的一种特殊信息，并且可以立即对锁接收到的信息进行处理，这种特殊的信息，称其为：终端信息。

软件终端并不是真正的终端，只是可被调用执行的一般程序一级DOS的系统功能调用(INT 21H)等都是软件中断

为了处理冰法的中断请求，优先权由高到低的顺序是

1. 除法错误、溢出中断、软件中断
2. 不可屏蔽中断
3. 可屏蔽中断
4. 单步中断

### 12.1内中断的产生

对于8086CPU内部发声下面的情况，将产生中断信息

1. 除法错误:0
2. 单步执行:1
3. 执行intozhiling:4
4. 执行int指令:int n,n为中断类型码

### 12.2 中断处理程序+12.3中断向量表

中断向量表就是中断向量的列表，展开来讲：中断向量表，就是中断处理程序入口地址的列表，中断向量表在内存中存放，对于8086PC机，从地址0处开始到03FF，1024个单元，一个表项站2个字(4字节)

### 12.4中断过程

1. 从终端信息取得中断类型码(N)
2. 标志寄存器的值入栈pushf
3. 设置标志寄存器的TF和IF(TF=0,IF=0)
4. cs入栈(PUSH CS)
5. ip入栈(PUSH IP)
6. 从内存地址为中断类型码*4和中断类型码*4+2的两个字段元中读取中断处理程序的入口地址设置IP和CS,(IP)=(N*4),(CS)=(N*4+2)

### 12.5中断处理程序和iret指令

1. 保存用到的寄存器
2. 处理终端
3. 恢复用到的寄存器
4. iret返回

iret指令的功能用汇编语法描述为
pop ip
pop cs
popf

### 12.6 除法错误中断的处理+12.7变成处理0号中断

    mov ax,1000h
    mov bh,1
    div bh